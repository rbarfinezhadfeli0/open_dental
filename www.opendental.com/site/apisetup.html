<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

	<title>Open Dental Software - API Developer Setup</title>
	<link href="resources/siteWithTree.css" rel="stylesheet" type="text/css">
	<link href="../css/common.css" rel="stylesheet" type="text/css">
	<script src = "resources/siteWithTreeToc.js"></script>
	<script src = "resources/siteWithTree.js"></script>
	<link rel="icon" type="image/png" href="resources/favicon.png">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body onload="BodyLoaded('apisetup','apispecification','documentation')">
	<nav class="LeftTree">
		<div class="TopBarLeft"><p>Table of Contents</p></div>
		<div id="TocTree"><a href="https://www.opendental.com/site/help.html">Help</a></div>
	</nav>
	<div class="RightMain">
		<div class="TopBar">
			<a href="../index.html">
				<div class="Logo">
					<img src="resources/logoWhite160.png" alt="Home" width="158" height="40">
				</div>
			</a>
			<div class="TopBarLinks">
				<div class="TopBarTitle"></div>
				<a href="searchSite.html">
					<div class="TopBarSearch">
						<img src="resources/search.gif"/>
						<p>Search<p>
					</div>
				</a>
			</div>
		</div>
		<div class="TopBar2"><p>API Developer Setup</p></div>
		<div class="GeneralPageContent">
<p>See <a href="apispecification.html">API Specification</a></p>
<p>The API web service is hosted at Open Dental headquarters. All requests are routed through this address to the appropriate office. The API Key specified in the Authorization header is linked to a specific office.</p>
<p>For additional information on integration types, see: <a href="integrationtypes.html">Open Dental Integration Types</a>.</p>
<h2>Steps to Enable the API</h2>
<p>See <a href="https://tinyurl.com/bdezfb2e">API Guide - Getting Started</a>.</p>
<p>In order to use the Remote API, the office must have an eConnector running. See <a href="../autoLogin.aspx%EF%B9%96ReturnUrl=%EA%A4%B7help253%EA%A4%B7econnector.html">eConnector</a> for installation instructions. Customers will receive an <a href="../autoLogin.aspx%EF%B9%96ReturnUrl=%EA%A4%B7help253%EA%A4%B7alerts.html">Alert</a> if their eConnector stops working. </p>
<p>Then, the developer will work with the customer to enable the API within Open Dental. Have the customer go to <a href="../autoLogin.aspx%EF%B9%96ReturnUrl=%EA%A4%B7help253%EA%A4%B7fhir.html">API Setup</a> and check the <i>Enabled</i> checkbox. This is also where additional customer keys can be created and disabled. </p>
<p>For setup information for other API modes, see <a href="apilocal.html">API Modes - Local, Service, and Remote</a>. </p>
<p>For troubleshooting steps, see <a href="../autoLogin.aspx%EF%B9%96ReturnUrl=%EA%A4%B7help253%EA%A4%B7servicemanager.html">Service Manager</a>.</p>
<h2>API Keys</h2>
<p>When requesting data from the API server, two API keys must be present in the request header: a Developer API Key and a Customer API Key. The Developer API key is unique to each developer and is obtained by logging into the <a href="https://api.opendental.com/portal/gwt/fhirportal.html">Developer Portal</a>. Customer API Keys are unique to each customer/developer pair and generated by the developer within the portal. </p>
<p> To obtain Developer Portal access contact <a href="mailto:vendor.relations@opendental.com">vendor.relations@opendental.com</a>. Please include the details below. </p>
<p> Product/Integration Owner (Company Name):<br> Contact Phone Number:<br> Email address for long-term billing:<br> Mailing address for long-term billing:<br> 3rd Party Developer Name (if any):<br> 3rd Party Developer Email Address:<br> A list of the API resources you need access to and for each permission, whether you need read, create, or update for that permission:<br> A description of the application you are intending to build (type and purpose):<br></p>
<p>To assign a Customer API key to an Open Dental customer, they will go to Setup &gt; Advanced Setup &gt; API. Click the Add Key in the lower left. Here is where you paste a key generated from the developer portal. The customer has the ability to enable or disable a key. The customer can view permissions granted to that key, but they cannot change those permissions. The interface in this window displays information from our HQ server, not the customer database.</p>
<p>When using the window described above, a copy of the keys are placed in a table in the customer's local database called "apikey". This table will then contain the customer's apikeys and each corresponding developer name exactly as entered in the developer portal. Occasionally, you may want to retrieve this information via a query. This will be rare, but can be accomplished with the following example: </p>
<p><span class="codeblock">SELECT CustApiKey FROM apikey WHERE DevName='YourName';</span></p>
<h2>Developer Portal</h2>
<p> The <a href="https://api.opendental.com/portal/gwt/fhirportal.html">Developer Portal</a> is where third-party developers can add or move keys, see key permissions, or edit account details. The process of moving a key may take up to 15 minutes to take effect.</p>
<h2>Authorization</h2>
<p>Each API request must include an Authorization header in this format:</p>
<p>Authorization: ODFHIR {DeveloperKey}/{CustomerKey}</p>
<p>For testing, the following credentials can be used:<br> Authorization: ODFHIR NFF6i0KrXrxDkZHt/VzkmZEaUWOjnQX2z</p>
<h2>Testing</h2>
<p>We use Postman for testing API requests and Webhook.site for testing API Events, but there are other options.</p>
<p>Open Dental hosts a test database for developers to test against. The base URL is the same endpoint listed above.</p>
<p>See the Authorization section above for the test credentials.</p>
<h2>Retrieving Aging Data</h2>
<p>These steps work for very large databases and should be taken to retrieve <a href="../autoLogin.aspx%EF%B9%96ReturnUrl=%EA%A4%B7help253%EA%A4%B7aging.html">Aging</a> data.</p>
<p class="MarginBottomZero">Within Open Dental: </p>
<ol class="MarginBottomGap">
<li>Ensure the <a href="../autoLogin.aspx%EF%B9%96ReturnUrl=%EA%A4%B7help253%EA%A4%B7opendentalservice.html">Open Dental Service</a> is running.</li>
<li>Ensure the preference <i><a href="../autoLogin.aspx%EF%B9%96ReturnUrl=%EA%A4%B7help253%EA%A4%B7preferences.html">Automated Aging Runtime</a></i> has a time entered.</li>
</ol>
<p class="MarginBottomZero">Via the API: </p>
<ol class="MarginBottomGap">
<li>Use <a href="apipreferences.html">GET preferences</a> to retrieve the date and time aging last ran.</li>
<ul>
<li>Supplying <span class="codeblock">PrefName=DateLastAging</span> returns the date aging ran.</li>
<li>Supplying <span class="codeblock">PrefName=AgingServiceTimeDue</span> returns the time aging ran. (Ignore the date component.)</li>
</ul>
<li>If DateLastAging has not been updated, wait until after the time in AgingServiceTimeDue has passed before moving forward.</li>
<li>Use <a href="apiqueries.html">PUT queries/ShortQuery</a> to query the patient table for the guarantors that have balances.</li>
<ul>
<li>Optional: Providing a clinicNum reduces execution time.</li>
<li>Example query:<p class="codeblock">SELECT patnum, estbalance, bal_0_30, bal_31_60, bal_61_90, balover90, insest, baltotal FROM patient WHERE patnum=guarantor and clinicnum=@ClinicNum AND ( estbalance&gt;0 OR bal_0_30&gt;0 OR bal_31_60&gt;0 OR bal_61_90&gt;0 OR balover90&gt;0 OR insest&gt;0 OR baltotal&gt;0)</p></li>
</ul>
</ol>
<p class="MarginBottomZero">To get aging data as of a date other than today (not recommended), there are two options: </p>
<ol class="MarginBottomGap">
<li>Use <a href="apireports.html">GET reports/Aging</a>. This endpoint does not run in a timely fashion on larger databases.</li>
<li>For larger databases, set up an SFTP server and use <a href="https://opendentalsoft.com:1943/ODQueryList/QueryList.aspx">Query Example 1655</a>.</li>
</ol>
		</div>
	</div>
</body>
</html>